imports:
  commons: commons.yml

types:
  Post:
    docs: A blog post
    properties:
      id: commons.PostId
      type: PostType
      title: string
      author: Author
      content: string
      customConfig: unknown
  BlogPostReference:
    discriminant:
      name: referenceType
      value: _type
    union:
      post: Post

  PostType:
    enum:
      - LONG
      - SHORT

  Author:
    union:
      anonymous: {}
      named:
        type: string

  CreatePostRequest:
    properties:
      title: string
      author: Author
      content: string

  GetPostResponse:
    properties:
      a: integer

errors:
  PostNotFoundError:
    status-code: 404
    type: string

services:
  http:
    PostsService:
      auth: false
      base-path: /posts
      endpoints:
        getPost:
          method: GET
          path: /{postId}
          path-parameters:
            postId: string
          request: CreatePostRequest
          response: GetPostResponse
          errors:
            - PostNotFoundError
